<!DOCTYPE html>
<html lang="en">

<head>
    <title>Add a GeoJSON line</title>
    <meta property="og:description"
        content="Add a GeoJSON line to a map using addSource, then style it using addLayerâ€™s paint properties." />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js'></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        // get geojson data from api
        async function getGeoData() {
            const response = await fetch("http://127.0.0.1:8000/geojson");
            const data = response.json();
            return data;
        }

        const map = new maplibregl.Map({
            container: "map",
            style: "https://demotiles.maplibre.org/style.json",
            center: [-122.486052, 37.830348],
            zoom: 15,
        });

        map.on("load", async () => {
            const geoData = await getGeoData();
            map.addSource("route", {
                type: "geojson",
                data: {
                    type: "Feature",
                    properties: {},
                    geometry: geoData,
                },
            });
            map.addLayer({
                id: "route",
                type: "line",
                source: "route",
                layout: {
                    "line-join": "round",
                    "line-cap": "round",
                },
                paint: {
                    "line-color": "#888",
                    "line-width": 8,
                },
            });
        });
    </script>
</body>

</html>